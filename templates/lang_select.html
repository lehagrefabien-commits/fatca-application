<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Language – FATCA</title>

  <style>
    :root{
      --bg:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line: rgba(15, 23, 42, 0.12);
      --btn:#111827;
      --btnText:#ffffff;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--text);
      min-height:100vh;
    }

    .topbar{
      height:64px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 22px;
      border-bottom: 1px solid var(--line);
    }
    .brand{
      font-weight:800;
      letter-spacing:-0.2px;
      color: var(--text);
      text-decoration:none;
    }
    .logo{
      height:52px;
      width:auto;
      display:block;
    }
    .logo-link{ display:inline-flex; align-items:center; }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 46px 22px 70px 22px;
    }
    .card{
      max-width: 760px;
      margin: 0 auto;
      padding: 40px 30px;
      border: 1px solid var(--line);
      border-radius: 18px;
      background:#fff;
    }

    h1{
      margin:0 0 14px 0;
      font-size: clamp(24px, 3vw, 34px);
      line-height:1.15;
      letter-spacing:-0.5px;
    }

    /* ===== Counter / explanation (premium “stat card”) ===== */
    .impact{
      margin: 10px 0 18px 0;
      display: grid;
      gap: 12px;
    }

    .impact-card{
      border: 1px solid rgba(15,23,42,0.10);
      border-radius: 14px;
      padding: 14px 14px;
      background: rgba(15,23,42,0.03);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }

    .impact-kpi{
      display:flex;
      align-items:baseline;
      gap: 10px;
      min-width: 0;
    }

    .impact-number{
      font-size: 22px;
      font-weight: 900;
      letter-spacing: -0.3px;
      color: #0f172a;
      line-height:1;
    }

    .impact-label{
      font-size: 13px;
      font-weight: 900;
      color:#0f172a;
      white-space: nowrap;
    }

    .impact-note{
      font-size: 12px;
      color: #475569;
      font-weight: 700;
      white-space: nowrap;
      opacity: 0.9;
    }

    .impact-text{
      max-width: 78ch;
    }

    .impact-pill{
      display:flex;
      gap: 10px;
      align-items:flex-start;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,0.10);
      background: #ffffff;
      color: #475569;
      font-size: 14px;
      line-height: 1.65;
    }

    .impact-icon{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,0.12);
      background: rgba(15,23,42,0.03);
      color:#0f172a;
      font-weight: 900;
      flex: 0 0 auto;
      margin-top: 2px;
      font-size: 12px;
    }

    /* ===== Language buttons ===== */
    .btn{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      width:100%;
      height:56px;
      padding: 0 16px;
      border-radius: 14px;
      text-decoration:none;
      font-weight: 900;
      background: #fff;
      color: var(--text);
      border: 1px solid var(--line);
    }
    .btn:hover{ background: rgba(15,23,42,0.02); }

    .kbd{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width: 34px;
      height: 28px;
      padding: 0 10px;
      border-radius: 10px;
      border: 1px solid var(--line);
      font-weight: 900;
      color: var(--muted);
      background: #fff;
    }
    .arrow{
      color: var(--muted);
      font-weight: 900;
    }

    .list{ display:grid; gap: 12px; margin-top: 18px; }

    @media (max-width: 860px){
      .card{ padding: 32px 18px; }
    }
    @media (max-width: 640px){
      .impact-card{
        flex-direction: column;
        align-items:flex-start;
      }
      .impact-note{
        white-space: normal;
      }
      .impact-label{
        white-space: normal;
      }
    }
  </style>
</head>

<body>
  <div class="topbar">
    <a class="brand" href="/">FATCA • RGPD • Belgique</a>
    <a class="logo-link" href="/" aria-label="Retour à l’accueil">
      <img class="logo" src="/static/aaa-logo.png" alt="AAA">
    </a>
  </div>

  <div class="wrap">
    <div class="card">
      <h1>Please choose your language</h1>

      {% if generated_count is defined %}
      <div class="impact" id="impact">
        <div class="impact-card">
          <div class="impact-kpi">
            <div class="impact-number">{{ generated_count }}</div>
            <div class="impact-label" data-i18n="label"></div>
          </div>
          <div class="impact-note" data-i18n="note"></div>
        </div>

        <div class="impact-text">
          <div class="impact-pill">
            <span class="impact-icon">ℹ︎</span>
            <span data-i18n="desc"></span>
          </div>
        </div>
      </div>
      {% endif %}

      <div class="list">
        <a class="btn" href="/context/fr" onclick="localStorage.setItem('ui_lang','fr')">
          <span class="kbd">A</span>
          <span style="flex:1;">Français</span>
          <span class="arrow">→</span>
        </a>

        <a class="btn" href="/context/nl" onclick="localStorage.setItem('ui_lang','nl')">
          <span class="kbd">B</span>
          <span style="flex:1;">Nederlands</span>
          <span class="arrow">→</span>
        </a>
      </div>

    </div>
  </div>

  <script>
    (function(){
      var t = {
        fr: {
          label: "courriers déjà générés",
          note: "Indicateur mis à jour automatiquement.",
          desc: "Ce chiffre correspond au nombre de courriers générés via cette application afin d’exercer le droit d’accès et le droit à l’effacement des données personnelles, tels que garantis par le RGPD, dans le contexte de l’accord FATCA."
        },
        nl: {
          label: "brieven reeds gegenereerd",
          note: "Indicator wordt automatisch bijgewerkt.",
          desc: "Dit cijfer geeft het aantal brieven weer dat via deze toepassing werd gegenereerd om het recht op inzage en het recht op gegevenswissing uit te oefenen, zoals gewaarborgd door de AVG, in het kader van de FATCA-overeenkomst."
        }
      };

      // Langue affichée sur cette page :
      // - si l’utilisateur a déjà cliqué FR/NL auparavant, on réutilise son choix
      // - sinon, on prend la langue du navigateur (nl -> NL), sinon FR
      var saved = localStorage.getItem("ui_lang");
      var nav = (navigator.language || "").toLowerCase();
      var lang = saved || (nav.startsWith("nl") ? "nl" : "fr");

      var root = document.getElementById("impact");
      if(!root) return;

      root.querySelectorAll("[data-i18n]").forEach(function(el){
        var k = el.getAttribute("data-i18n");
        el.textContent = t[lang][k];
      });

      // Accessibilité : refléter la langue réelle
      document.documentElement.setAttribute("lang", lang);
    })();
  </script>
</body>
</html>
